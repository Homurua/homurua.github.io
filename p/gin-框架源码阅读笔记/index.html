<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='ã€€æœ€è¿‘åœ¨å­¦ä¹  Go è¯­è¨€ï¼Œç®€å•å­¦å®Œè¯­æ³•ä»¥åï¼Œæƒ³æ‰¾ä¸ªæ¡†æ¶çœ‹çœ‹ã€‚æ­£å¥½ Gin æ¡†æ¶çš„ä»£ç éå¸¸ç²¾ç‚¼ï¼Œä¸ç®— test å’Œæ³¨é‡Šçš„è¯ï¼Œåªæœ‰å››åƒå¤šè¡Œï¼Œåå­—ä¹Ÿæ¯”è¾ƒå¥½å¬ï¼Œæ³¨é‡Šä¹Ÿå†™çš„æ¯”è¾ƒå®Œæ•´ï¼Œéå¸¸é€‚åˆé˜…è¯»ï¼Œå°±æœæ–­ fork ä¸€ä»½å¼€å§‹çœ‹äº†ã€‚æœ¬ç¯‡è®°å½•ä¸‹å­¦ä¹ ä¸­çš„è¦ç‚¹ã€‚
'><title>Gin æ¡†æ¶æºç é˜…è¯»ç¬”è®°</title>

<link rel='canonical' href='https://wmf.im/p/gin-%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/'>

<link rel="stylesheet" href="/scss/style.min.e2f1b0a7c117e0132d2bfedd61d7ce82c7bd6daae147284607d15b4402c78602.css"><meta property='og:title' content='Gin æ¡†æ¶æºç é˜…è¯»ç¬”è®°'>
<meta property='og:description' content='ã€€æœ€è¿‘åœ¨å­¦ä¹  Go è¯­è¨€ï¼Œç®€å•å­¦å®Œè¯­æ³•ä»¥åï¼Œæƒ³æ‰¾ä¸ªæ¡†æ¶çœ‹çœ‹ã€‚æ­£å¥½ Gin æ¡†æ¶çš„ä»£ç éå¸¸ç²¾ç‚¼ï¼Œä¸ç®— test å’Œæ³¨é‡Šçš„è¯ï¼Œåªæœ‰å››åƒå¤šè¡Œï¼Œåå­—ä¹Ÿæ¯”è¾ƒå¥½å¬ï¼Œæ³¨é‡Šä¹Ÿå†™çš„æ¯”è¾ƒå®Œæ•´ï¼Œéå¸¸é€‚åˆé˜…è¯»ï¼Œå°±æœæ–­ fork ä¸€ä»½å¼€å§‹çœ‹äº†ã€‚æœ¬ç¯‡è®°å½•ä¸‹å­¦ä¹ ä¸­çš„è¦ç‚¹ã€‚
'>
<meta property='og:url' content='https://wmf.im/p/gin-%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/'>
<meta property='og:site_name' content='æ”¾å­¦åèŒ¶ä¼š'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='webå¼€å‘' /><meta property='article:tag' content='golang' /><meta property='article:published_time' content='2022-06-18T11:18:17&#43;08:00'/><meta property='article:modified_time' content='2022-06-18T11:18:17&#43;08:00'/>
<meta name="twitter:title" content="Gin æ¡†æ¶æºç é˜…è¯»ç¬”è®°">
<meta name="twitter:description" content="ã€€æœ€è¿‘åœ¨å­¦ä¹  Go è¯­è¨€ï¼Œç®€å•å­¦å®Œè¯­æ³•ä»¥åï¼Œæƒ³æ‰¾ä¸ªæ¡†æ¶çœ‹çœ‹ã€‚æ­£å¥½ Gin æ¡†æ¶çš„ä»£ç éå¸¸ç²¾ç‚¼ï¼Œä¸ç®— test å’Œæ³¨é‡Šçš„è¯ï¼Œåªæœ‰å››åƒå¤šè¡Œï¼Œåå­—ä¹Ÿæ¯”è¾ƒå¥½å¬ï¼Œæ³¨é‡Šä¹Ÿå†™çš„æ¯”è¾ƒå®Œæ•´ï¼Œéå¸¸é€‚åˆé˜…è¯»ï¼Œå°±æœæ–­ fork ä¸€ä»½å¼€å§‹çœ‹äº†ã€‚æœ¬ç¯‡è®°å½•ä¸‹å­¦ä¹ ä¸­çš„è¦ç‚¹ã€‚
">
    <link rel="shortcut icon" href="/img/dango.svg" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar2_hu982b126fde96804c253e53a1f123b818_111741_300x0_resize_box_3.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ğŸ¡</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">æ”¾å­¦åèŒ¶ä¼š</a></h1>
            <h2 class="site-description">Please don&#39;t say &#34;You are lazy&#34;</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/medetasi'
                        target="_blank"
                        title="GitHub"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        

        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>ä¸»é¡µ</span>
            </a>
        </li>
        
        

        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>å½’æ¡£</span>
            </a>
        </li>
        
        

        <li >
            <a href='/%E6%94%BE%E5%AD%A6%E5%90%8E%E8%8C%B6%E4%BC%9A/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>å…³äº</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>æš—è‰²æ¨¡å¼</span>
                </li>
            
        </div>
    </ol>
</aside>
<main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/golang%E7%AC%94%E8%AE%B0/" style="background-color: #79D4FD; color: #fff;">
                golangç¬”è®°
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/gin-%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/">Gin æ¡†æ¶æºç é˜…è¯»ç¬”è®°</a>
        </h2>
    
        
    </div>

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Jun 18, 2022</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    é˜…è¯»æ—¶é•¿: 9 åˆ†é’Ÿ
                </time>
            </div>
        
    </footer>
    

    
</div>
</header>

    <section class="article-content">
    
    
    <p>ã€€ã€€æœ€è¿‘åœ¨å­¦ä¹  Go è¯­è¨€ï¼Œç®€å•å­¦å®Œè¯­æ³•ä»¥åï¼Œæƒ³æ‰¾ä¸ªæ¡†æ¶çœ‹çœ‹ã€‚æ­£å¥½ Gin æ¡†æ¶çš„ä»£ç éå¸¸ç²¾ç‚¼ï¼Œä¸ç®— test å’Œæ³¨é‡Šçš„è¯ï¼Œåªæœ‰å››åƒå¤šè¡Œï¼Œåå­—ä¹Ÿæ¯”è¾ƒå¥½å¬ï¼Œæ³¨é‡Šä¹Ÿå†™çš„æ¯”è¾ƒå®Œæ•´ï¼Œéå¸¸é€‚åˆé˜…è¯»ï¼Œå°±æœæ–­ fork ä¸€ä»½å¼€å§‹çœ‹äº†ã€‚æœ¬ç¯‡è®°å½•ä¸‹å­¦ä¹ ä¸­çš„è¦ç‚¹ã€‚</p>
<h2 id="ä»‹ç»">ä»‹ç»</h2>
<blockquote>
<p>Gin is a web framework written in Go (Golang). It features a martini-like API with much better performance, up to 40 times faster thanks to httprouter. If you need performance and good productivity, you will love Gin.</p>
</blockquote>
<p>ã€€ã€€Gin çš„å®˜ç½‘å¯¹è‡ªå·±çš„ä»‹ç»æ˜¯ â€œé«˜æ€§èƒ½â€ å’Œ â€œè‰¯å¥½ç”Ÿäº§æ•ˆç‡â€ çš„ web æ¡†æ¶ã€‚è¿˜æåˆ°äº†ä¸¤ä¸ªå…¶å®ƒçš„åº“ï¼Œç¬¬ä¸€ä¸ªæ˜¯ <a class="link" href="https://github.com/go-martini/martini"  target="_blank" rel="noopener"
    >martini</a>ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ª web æ¡†æ¶ï¼Œåå­—ä¹Ÿæ˜¯é…’åï¼ŒGin è¯´è‡ªå·±ç”¨äº†å®ƒçš„ APIï¼Œä½†æ˜¯é€Ÿåº¦æ¯”å®ƒå¿« 40 å€ã€‚ä½¿ç”¨äº† <a class="link" href="https://github.com/julienschmidt/httprouter"  target="_blank" rel="noopener"
    >httprouter</a> å°±æ˜¯èƒ½å¤Ÿå®ç°æ¯” martini å¿« 40 å€çš„ä¸€ä¸ªé‡è¦åŸå› ã€‚<br>
ã€€ã€€åœ¨å®˜ç½‘çš„ Features ä¸­ï¼Œæœ‰ 8 ä¸ªè¢«åˆ—å‡ºæ¥çš„å…³é”®åŠŸèƒ½ï¼Œåé¢ä¼šæ…¢æ…¢çœ‹åˆ°è¿™äº›åŠŸèƒ½çš„å®ç°ã€‚</p>
<ul>
<li>Fast</li>
<li>Middleware support</li>
<li>Crash-free</li>
<li>JSON validation</li>
<li>Routes grouping</li>
<li>Error management</li>
<li>Rendering built-in/Extendable</li>
</ul>
<h2 id="ä»ä¸€ä¸ªå°ä¾‹å­å…¥æ‰‹">ä»ä¸€ä¸ªå°ä¾‹å­å…¥æ‰‹</h2>
<p>ã€€ã€€æ¥çœ‹ä¸€ä¸ªå®˜ç½‘æ–‡æ¡£ç»™å‡ºçš„æœ€å°ä¾‹å­ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Golang" data-lang="Golang"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="s">&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">r</span> <span class="o">:=</span> <span class="nx">gin</span><span class="p">.</span><span class="nf">Default</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="nx">r</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;/ping&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">c</span><span class="p">.</span><span class="nf">JSON</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="nx">gin</span><span class="p">.</span><span class="nx">H</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s">&#34;message&#34;</span><span class="p">:</span> <span class="s">&#34;pong&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="nx">r</span><span class="p">.</span><span class="nf">Run</span><span class="p">()</span> <span class="c1">// listen and serve on 0.0.0.0:8080
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€è¿è¡Œè¯¥ä¾‹å­ï¼Œç„¶åä½¿ç”¨æµè§ˆå™¨è®¿é—® http://localhost:8080/ping å³å¯å¾—åˆ°ä¸€ä¸ª &ldquo;pong&rdquo;ï¼Œ233ã€‚<br>
ã€€ã€€è¿™ä¸ªä¾‹å­å¾ˆç®€å•ï¼Œæ‹†åˆ†ä¸€ä¸‹åªæœ‰ä¸‰æ­¥ã€‚</p>
<ol>
<li>ä½¿ç”¨ gin.Default() åˆ›å»ºä¸€ä¸ªé»˜è®¤é…ç½®çš„ Engine å¯¹è±¡ã€‚</li>
<li>ä¸º Engine çš„ GET æ–¹æ³•çš„ &ldquo;/ping&rdquo; åœ°å€æ³¨å†Œä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ª &ldquo;pong&rdquo;ã€‚</li>
<li>å¯åŠ¨ Engineï¼Œå¼€å§‹ç›‘å¬ç«¯å£æä¾›æœåŠ¡ã€‚</li>
</ol>
<h2 id="http-method">HTTP Method</h2>
<p>ã€€ã€€é€šè¿‡ä¸Šé¢å°ä¾‹å­ä¸­çš„ GET æ–¹æ³•å¯ä»¥çœ‹å‡ºåœ¨ Gin ä¸­éœ€è¦ä½¿ç”¨å¯¹åº”çš„åŒåå‡½æ•°æ³¨å†Œ HTTP Method çš„å¤„ç†æ–¹æ³•ã€‚<br>
ã€€ã€€HTTP Method æœ‰ä¹ç§æ–¹æ³•ï¼Œæœ€å¸¸ç”¨çš„æœ‰å››ç§ï¼Œåˆ†åˆ«æ˜¯ GET/POST/PUT/DELETEï¼Œåˆ†åˆ«å¯¹åº”äº†æŸ¥è¯¢ã€æ’å…¥ã€æ›´æ–°ã€åˆ é™¤å››ç§åŠŸèƒ½ã€‚éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼ŒGin è¿˜æä¾›äº† Any æ¥å£ï¼Œå¯ä»¥ç›´æ¥å¯¹ä¸€ä¸ªåœ°å€ç»‘å®šæ‰€æœ‰çš„ HTTP Method å¤„ç†æ–¹æ³•ã€‚<br>
ã€€ã€€è¿”å›çš„ç»“æœä¸€èˆ¬åŒ…å«ä¸¤åˆ°ä¸‰éƒ¨åˆ†ï¼Œå…¶ä¸­ code å’Œ message æ˜¯ä¸€å®šä¼šæœ‰çš„ï¼Œdata ä¸€èˆ¬ç”¨æ¥è¡¨ç¤ºé¢å¤–çš„æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰é¢å¤–æ•°æ®éœ€è¦è¿”å›çš„å¯ä»¥ä¸ä½¿ç”¨ã€‚ä¾‹å­ä¸­çš„ 200 å°±æ˜¯ code å­—æ®µçš„å€¼ï¼Œpong å°±æ˜¯ message å­—æ®µçš„å€¼ã€‚</p>
<h2 id="åˆ›å»º-engine-å˜é‡">åˆ›å»º Engine å˜é‡</h2>
<p>ã€€ã€€åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œåˆ›å»º Engine ä½¿ç”¨çš„æ˜¯ gin.Default()ï¼Œä¸è¿‡è¿™ä¸ªå‡½æ•°æ˜¯å¯¹ New çš„å°è£…ï¼Œå®é™…åˆ›å»º Engine éƒ½æ˜¯é€šè¿‡ New æ¥å£åˆ›å»ºçš„ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Golang" data-lang="Golang"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">New</span><span class="p">()</span> <span class="o">*</span><span class="nx">Engine</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">debugPrintWARNINGNew</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="nx">engine</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">Engine</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">RouterGroup</span><span class="p">:</span> <span class="nx">RouterGroup</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// ... åˆå§‹åŒ– RouterGroup çš„å­—æ®µ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ... åˆå§‹åŒ–å…¶ä½™å­—æ®µ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">engine</span><span class="p">.</span><span class="nx">RouterGroup</span><span class="p">.</span><span class="nx">engine</span> <span class="p">=</span> <span class="nx">engine</span> <span class="c1">// å°† engine çš„æŒ‡é’ˆä¿å­˜åœ¨ RouterGroup ä¸­
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">engine</span><span class="p">.</span><span class="nx">pool</span><span class="p">.</span><span class="nx">New</span> <span class="p">=</span> <span class="kd">func</span><span class="p">()</span> <span class="nx">any</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">engine</span><span class="p">.</span><span class="nf">allocateContext</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">engine</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€å…ˆæ¥ç®€å•çœ‹ä¸€ä¸‹åˆ›å»ºçš„è¿‡ç¨‹å³å¯ï¼Œæš‚æ—¶ä¸å»å…³æ³¨ Engine ç»“æ„ä¸­çš„å„ç§æˆå‘˜å˜é‡çš„å«ä¹‰ã€‚å¯ä»¥çœ‹åˆ° New é™¤äº†åˆ›å»ºå¹¶åˆå§‹åŒ–äº†ä¸€ä¸ª Engine ç±»å‹çš„å˜é‡ engine ä»¥å¤–ï¼Œè¿˜æŠŠ engine.pool.New è®¾ä¸ºäº†ä¸€ä¸ªè°ƒç”¨ engine.allocateContext() çš„åŒ¿åå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„ä½œç”¨åé¢å†è¯´ã€‚</p>
<h2 id="æ³¨å†Œè·¯ç”±å›è°ƒå‡½æ•°">æ³¨å†Œè·¯ç”±å›è°ƒå‡½æ•°</h2>
<p>ã€€ã€€åœ¨ Engine ä¸­æœ‰ä¸€ä¸ªå†…åµŒç»“æ„ä½“ RouterGroupï¼ŒEngine çš„ä¸ HTTP Method æœ‰å…³çš„æ¥å£éƒ½æ˜¯ç»§æ‰¿è‡ª RouterGroup çš„ï¼Œå®˜ç½‘æåˆ°çš„åŠŸèƒ½ç‚¹é‡Œçš„ <code>Routes grouping</code> å°±æ˜¯é€šè¿‡ RouterGroup ç»“æ„ä½“æ¥å®ç°çš„ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Golang" data-lang="Golang"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">RouterGroup</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Handlers</span> <span class="nx">HandlersChain</span> <span class="c1">// Group è‡ªèº«çš„å¤„ç†å‡½æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">basePath</span> <span class="kt">string</span>        <span class="c1">// å…³è”çš„åŸºæœ¬è·¯å¾„
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">engine</span>   <span class="o">*</span><span class="nx">Engine</span>       <span class="c1">// ä¿å­˜å…³è”çš„ engine å¯¹è±¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">root</span>     <span class="kt">bool</span>          <span class="c1">// root æ ‡å¿—ï¼Œåªæœ‰ Engine é»˜è®¤åˆ›å»ºçš„æ‰æ˜¯ true
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€æ¯ä¸ª RouterGroup å…³è”äº†ä¸€ä¸ªåŸºæœ¬è·¯å¾„ basePathï¼ŒEngine å†…åµŒçš„ RouterGroup çš„ basePath ä¸º &ldquo;/&rdquo; ã€‚<br>
ã€€ã€€è¿˜æœ‰ä¸€ç»„å¤„ç†å‡½æ•° Handlersï¼Œæ‰€æœ‰æœ¬ç»„å…³è”çš„è·¯å¾„ä¸‹çš„è¯·æ±‚éƒ½ä¼šé¢å¤–æ‰§è¡Œæœ¬ç»„çš„å¤„ç†å‡½æ•°ï¼Œä¸»è¦æ˜¯ç”¨äºä¸­é—´ä»¶çš„è°ƒç”¨ã€‚Handlers åœ¨ Engine åˆ›å»ºçš„æ—¶å€™æ˜¯ nilï¼Œå¯ä»¥é€šè¿‡ Use æ–¹æ³•å¯¼å…¥ä¸€ç»„å‡½æ•°è¿›å»ï¼Œåé¢ä¼šçœ‹åˆ°è¿™ä¸ªç”¨æ³•ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Golang" data-lang="Golang"><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">group</span> <span class="o">*</span><span class="nx">RouterGroup</span><span class="p">)</span> <span class="nf">handle</span><span class="p">(</span><span class="nx">httpMethod</span><span class="p">,</span> <span class="nx">relativePath</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">handlers</span> <span class="nx">HandlersChain</span><span class="p">)</span> <span class="nx">IRoutes</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">absolutePath</span> <span class="o">:=</span> <span class="nx">group</span><span class="p">.</span><span class="nf">calculateAbsolutePath</span><span class="p">(</span><span class="nx">relativePath</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">handlers</span> <span class="p">=</span> <span class="nx">group</span><span class="p">.</span><span class="nf">combineHandlers</span><span class="p">(</span><span class="nx">handlers</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">group</span><span class="p">.</span><span class="nx">engine</span><span class="p">.</span><span class="nf">addRoute</span><span class="p">(</span><span class="nx">httpMethod</span><span class="p">,</span> <span class="nx">absolutePath</span><span class="p">,</span> <span class="nx">handlers</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">group</span><span class="p">.</span><span class="nf">returnObj</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€RouterGroup çš„ handle æ–¹æ³•æ˜¯æ‰€æœ‰æ³¨å†Œ HTTP Method å›è°ƒå‡½æ•°çš„æœ€ç»ˆå…¥å£ï¼Œä¸€å¼€å§‹é‚£ä¸ªä¾‹å­ä¸­è°ƒç”¨çš„ GET ä»¥åŠå…¶å®ƒä¸ HTTP Method æœ‰å…³çš„æ–¹æ³•éƒ½åªæ˜¯å¯¹ handle æ–¹æ³•çš„å°è£…ã€‚<br>
ã€€ã€€handle æ–¹æ³•ä¼šæ ¹æ® RouterGroup çš„ basePath å’Œç›¸å¯¹åœ°å€å‚æ•°è®¡ç®—å‡ºç»å¯¹åœ°å€ï¼ŒåŒæ—¶è°ƒç”¨ combineHandlers æ–¹æ³•å¾—åˆ°æœ€ç»ˆçš„ handlers æ•°ç»„ã€‚å°†è¿™äº›ç»“æœä½œä¸ºå‚æ•°ï¼Œä¼ ç»™ Engine çš„ addRoute æ–¹æ³•æ¥æ³¨å†Œå¤„ç†å‡½æ•°ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Go" data-lang="Go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">group</span> <span class="o">*</span><span class="nx">RouterGroup</span><span class="p">)</span> <span class="nf">combineHandlers</span><span class="p">(</span><span class="nx">handlers</span> <span class="nx">HandlersChain</span><span class="p">)</span> <span class="nx">HandlersChain</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">finalSize</span> <span class="o">:=</span> <span class="nb">len</span><span class="p">(</span><span class="nx">group</span><span class="p">.</span><span class="nx">Handlers</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="nx">handlers</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nf">assert1</span><span class="p">(</span><span class="nx">finalSize</span> <span class="p">&lt;</span> <span class="nb">int</span><span class="p">(</span><span class="nx">abortIndex</span><span class="p">),</span> <span class="s">&#34;too many handlers&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">mergedHandlers</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="nx">HandlersChain</span><span class="p">,</span> <span class="nx">finalSize</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">copy</span><span class="p">(</span><span class="nx">mergedHandlers</span><span class="p">,</span> <span class="nx">group</span><span class="p">.</span><span class="nx">Handlers</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">copy</span><span class="p">(</span><span class="nx">mergedHandlers</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="nx">group</span><span class="p">.</span><span class="nx">Handlers</span><span class="p">):],</span> <span class="nx">handlers</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">mergedHandlers</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€combineHandlers æ–¹æ³•åšçš„äº‹æƒ…å°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªåˆ‡ç‰‡ mergedHandlersï¼Œç„¶åå…ˆå°† RouterGroup æœ¬èº«çš„ Handlers å¤åˆ¶è¿›å»ï¼Œå†å°†å‚æ•°çš„ handlers å¤åˆ¶è¿›å»ï¼Œæœ€åå°† mergedHandlers è¿”å›ã€‚ä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨ handle æ³¨å†Œä»»ä½•æ–¹æ³•çš„æ—¶å€™ï¼Œå®é™…çš„ç»“æœéƒ½æ˜¯åŒ…æ‹¬äº† RouterGroup æœ¬èº«çš„ Handlers çš„ã€‚</p>
<h2 id="ä½¿ç”¨åŸºæ•°æ ‘åŠ é€Ÿè·¯ç”±æ£€ç´¢">ä½¿ç”¨åŸºæ•°æ ‘åŠ é€Ÿè·¯ç”±æ£€ç´¢</h2>
<p>ã€€ã€€åœ¨å®˜ç½‘æåˆ°çš„åŠŸèƒ½ç‚¹çš„ <code>Fast</code> é‡Œæåˆ°äº†ç½‘ç»œè¯·æ±‚çš„è·¯ç”±æ˜¯åŸºäºåŸºæ•°æ ‘ï¼ˆRadix Treeï¼‰å®ç°çš„ã€‚è¿™éƒ¨åˆ†å¹¶ä¸æ˜¯ Gin å®ç°çš„ï¼Œè€Œæ˜¯å¼€ç¯‡åœ¨ Gin çš„ä»‹ç»é‡Œæåˆ°çš„ httprouter å®ç°çš„ï¼ŒGin ä½¿ç”¨äº† httprouter æ¥åšäº†è¿™éƒ¨åˆ†çš„åŠŸèƒ½ã€‚æœ‰å…³äºåŸºæ•°æ ‘çš„å®ç°è¿™é‡Œæš‚ä¸”ä¸æï¼Œæš‚æ—¶åªå…³æ³¨å®ƒçš„ç”¨æ³•ï¼Œå¯èƒ½åé¢ä¼šå¦å¼€ä¸€ç¯‡ä¸“é—¨å†™ä¸€ä¸‹åŸºæ•°æ ‘çš„å®ç°ã€‚<br>
ã€€ã€€åœ¨ Engine ä¸­æœ‰ä¸€ä¸ª trees å˜é‡ï¼Œå®ƒæ˜¯ä¸€ä¸ª methodTree ç»“æ„çš„åˆ‡ç‰‡ï¼Œæ­£æ˜¯è¿™ä¸ªå˜é‡ä¿å­˜äº†æ‰€æœ‰çš„åŸºæ•°æ ‘çš„å¼•ç”¨ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Go" data-lang="Go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">methodTree</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">method</span> <span class="kt">string</span> <span class="c1">// method çš„åå­—
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">root</span>   <span class="o">*</span><span class="nx">node</span>  <span class="c1">// é“¾è¡¨çš„ root èŠ‚ç‚¹æŒ‡é’ˆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€Engine ä¸ºæ¯ä¸ª HTTP Method ç»´æŠ¤äº†ä¸€é¢—åŸºæ•°æ ‘ï¼Œè¿™æ£µæ ‘çš„ root èŠ‚ç‚¹ä¸ Method çš„åå­—ä¸€èµ·è¢«ä¿å­˜åœ¨äº†ä¸€ä¸ª methodTree å˜é‡ä¸­ï¼Œæ‰€æœ‰çš„ methodTree å˜é‡åˆéƒ½åœ¨ trees é‡Œã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Go" data-lang="Go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">engine</span> <span class="o">*</span><span class="nx">Engine</span><span class="p">)</span> <span class="nf">addRoute</span><span class="p">(</span><span class="nx">method</span><span class="p">,</span> <span class="nx">path</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">handlers</span> <span class="nx">HandlersChain</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ... çœç•¥ä¸€äº›ä»£ç 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">root</span> <span class="o">:=</span> <span class="nx">engine</span><span class="p">.</span><span class="nx">trees</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="nx">method</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">root</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">root</span> <span class="p">=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nx">root</span><span class="p">.</span><span class="nx">fullPath</span> <span class="p">=</span> <span class="s">&#34;/&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">engine</span><span class="p">.</span><span class="nx">trees</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">engine</span><span class="p">.</span><span class="nx">trees</span><span class="p">,</span> <span class="nx">methodTree</span><span class="p">{</span><span class="nx">method</span><span class="p">:</span> <span class="nx">method</span><span class="p">,</span> <span class="nx">root</span><span class="p">:</span> <span class="nx">root</span><span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">root</span><span class="p">.</span><span class="nf">addRoute</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">handlers</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ... çœç•¥ä¸€äº›ä»£ç 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€å¯ä»¥çœ‹åˆ°åœ¨ Engine çš„ addRoute æ–¹æ³•ä¸­ï¼Œä¼šé¦–å…ˆä½¿ç”¨ trees çš„ get æ–¹æ³•æ‹¿åˆ° method å¯¹åº”çš„åŸºæ•°æ ‘çš„ root èŠ‚ç‚¹ã€‚å¦‚æœæ²¡æœ‰å–åˆ°åŸºæ•°æ ‘çš„ root èŠ‚ç‚¹ï¼Œåˆ™è¯´æ˜ä¹‹å‰æ²¡æœ‰å¯¹è¯¥ method æ³¨å†Œè¿‡æ–¹æ³•ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ ‘èŠ‚ç‚¹ä½œä¸ºæ ‘çš„æ ¹èŠ‚ç‚¹å¹¶å°†å…¶åŠ å…¥åˆ° trees ä¸­ã€‚<br>
ã€€ã€€åœ¨æ‹¿åˆ° root èŠ‚ç‚¹ä»¥åï¼Œä½¿ç”¨ root èŠ‚ç‚¹çš„ addRoute æ–¹æ³•ä¸ºè·¯å¾„ path æ³¨å†Œä¸€ç»„å¤„ç†å‡½æ•° handlersï¼Œè¿™ä¸€æ­¥å°±æ˜¯ä¸º path å’Œ handlers åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹å­˜å…¥åŸºæ•°æ ‘ä¸­ï¼Œå¦‚æœè¯•å›¾æ³¨å†Œä¸€ä¸ªå·²ç»æ³¨å†Œè¿‡çš„åœ°å€ï¼ŒaddRoute ä¼šç›´æ¥æŠ›å‡ºä¸€ä¸ª panic é”™è¯¯ã€‚<br>
ã€€ã€€åœ¨å¤„ç† HTTP è¯·æ±‚çš„æ—¶å€™ï¼Œå°±éœ€è¦é€šè¿‡ path æŸ¥æ‰¾å¯¹åº”çš„èŠ‚ç‚¹çš„å€¼ã€‚root èŠ‚ç‚¹æœ‰ä¸€ä¸ª getValue çš„æ–¹æ³•è´Ÿè´£å¤„ç†æŸ¥è¯¢çš„æ“ä½œï¼Œåé¢è®²åˆ° Gin å¤„ç† HTTP è¯·æ±‚çš„æ—¶å€™ä¼šæåˆ°ã€‚</p>
<h2 id="å¯¼å…¥ä¸­é—´ä»¶å¤„ç†å‡½æ•°">å¯¼å…¥ä¸­é—´ä»¶å¤„ç†å‡½æ•°</h2>
<p>ã€€ã€€RouterGroup çš„ Use æ–¹æ³•å¯ä»¥å¯¼å…¥ä¸€ç»„ä¸­é—´ä»¶å¤„ç†å‡½æ•°ã€‚å®˜ç½‘æåˆ°çš„åŠŸèƒ½ç‚¹é‡Œçš„ <code>Middleware support</code> å°±æ˜¯é€šè¿‡ Use æ–¹æ³•å®ç°çš„ã€‚<br>
ã€€ã€€åœ¨ä¸€å¼€å§‹çš„ä¾‹å­ä¸­ï¼Œåˆ›å»º Engine ç»“æ„ä½“å˜é‡çš„æ—¶å€™å¹¶æ²¡æœ‰ä½¿ç”¨ Newï¼Œè€Œæ˜¯ä½¿ç”¨äº† Defaultï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ Default åšäº†ä»€ä¹ˆé¢å¤–çš„ä¸œè¥¿ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Golang" data-lang="Golang"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">Default</span><span class="p">()</span> <span class="o">*</span><span class="nx">Engine</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">debugPrintWARNINGDefault</span><span class="p">()</span>       <span class="c1">// è¾“å‡ºæ—¥å¿—
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">engine</span> <span class="o">:=</span> <span class="nf">New</span><span class="p">()</span>                  <span class="c1">// åˆ›å»ºå¯¹è±¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">engine</span><span class="p">.</span><span class="nf">Use</span><span class="p">(</span><span class="nf">Logger</span><span class="p">(),</span> <span class="nf">Recovery</span><span class="p">())</span> <span class="c1">// å¯¼å…¥ä¸­é—´ä»¶å¤„ç†å‡½æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="nx">engine</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€å¯ä»¥çœ‹åˆ°å®ƒæ˜¯ä¸ªå¾ˆç®€å•çš„å‡½æ•°ï¼Œé™¤äº†è°ƒç”¨ New åˆ›å»º Engine å¯¹è±¡ä»¥å¤–ï¼Œåªå¯¹å®ƒè°ƒç”¨äº† Use æ¥å¯¼å…¥äº†ä¸¤ä¸ªä¸­é—´ä»¶å‡½æ•°ï¼ŒLogger å’Œ Recovery çš„è¿”å›å€¼ã€‚Logger çš„è¿”å›å€¼æ˜¯ç”¨æ¥è®°å½•æ—¥å¿—çš„å‡½æ•°ï¼ŒRecovery çš„è¿”å›å€¼æ˜¯ç”¨æ¥å¤„ç† panic çš„å‡½æ•°ï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆå¸¦è¿‡ï¼Œåé¢å†æ¥çœ‹è¿™ä¸¤ä¸ªå‡½æ•°ã€‚<br>
ã€€ã€€Engine è™½ç„¶å†…åµŒäº† RouterGroupï¼Œä½†æ˜¯å®ƒæœ¬èº«ä¹Ÿå®ç°äº† Use æ–¹æ³•ï¼Œä¸è¿‡åªæ˜¯å¯¹ RouterGroup çš„ Use æ–¹æ³•çš„è°ƒç”¨ï¼Œä»¥åŠä¸€äº›è¾…åŠ©æ“ä½œã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Golang" data-lang="Golang"><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">engine</span> <span class="o">*</span><span class="nx">Engine</span><span class="p">)</span> <span class="nf">Use</span><span class="p">(</span><span class="nx">middleware</span> <span class="o">...</span><span class="nx">HandlerFunc</span><span class="p">)</span> <span class="nx">IRoutes</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">engine</span><span class="p">.</span><span class="nx">RouterGroup</span><span class="p">.</span><span class="nf">Use</span><span class="p">(</span><span class="nx">middleware</span><span class="o">...</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">engine</span><span class="p">.</span><span class="nf">rebuild404Handlers</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="nx">engine</span><span class="p">.</span><span class="nf">rebuild405Handlers</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">engine</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">group</span> <span class="o">*</span><span class="nx">RouterGroup</span><span class="p">)</span> <span class="nf">Use</span><span class="p">(</span><span class="nx">middleware</span> <span class="o">...</span><span class="nx">HandlerFunc</span><span class="p">)</span> <span class="nx">IRoutes</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">group</span><span class="p">.</span><span class="nx">Handlers</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">group</span><span class="p">.</span><span class="nx">Handlers</span><span class="p">,</span> <span class="nx">middleware</span><span class="o">...</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">group</span><span class="p">.</span><span class="nf">returnObj</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€å¯ä»¥çœ‹åˆ° RouterGroup çš„ Use æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯å°†å‚æ•°çš„ä¸­é—´ä»¶å¤„ç†å‡½æ•°é€šè¿‡ append åŠ å…¥åˆ°äº†è‡ªå·±çš„ Handlers ä¸­ã€‚</p>
<h2 id="å¼€å§‹è¿è¡Œ">å¼€å§‹è¿è¡Œ</h2>
<p>ã€€ã€€åœ¨å°ä¾‹å­ä¸­ï¼Œæœ€åä¸€æ­¥æ˜¯è°ƒç”¨äº† Engine çš„ Run æ–¹æ³•ï¼Œæ— å‚æ•°ã€‚è°ƒç”¨ä»¥åæ•´ä¸ªæ¡†æ¶å¼€å§‹è¿è¡Œï¼Œä½¿ç”¨æµè§ˆå™¨è®¿é—®æ³¨å†Œå¥½çš„åœ°å€å°±å¯ä»¥æ­£ç¡®è§¦å‘å›è°ƒäº†ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Go" data-lang="Go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">engine</span> <span class="o">*</span><span class="nx">Engine</span><span class="p">)</span> <span class="nf">Run</span><span class="p">(</span><span class="nx">addr</span> <span class="o">...</span><span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">err</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ... çœç•¥ä¸€äº›ä»£ç 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">address</span> <span class="o">:=</span> <span class="nf">resolveAddress</span><span class="p">(</span><span class="nx">addr</span><span class="p">)</span> <span class="c1">// è§£æåœ°å€ï¼Œé»˜è®¤åœ°å€æ˜¯ 0.0.0.0:8080
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">debugPrint</span><span class="p">(</span><span class="s">&#34;Listening and serving HTTP on %s\n&#34;</span><span class="p">,</span> <span class="nx">address</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">err</span> <span class="p">=</span> <span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="nx">address</span><span class="p">,</span> <span class="nx">engine</span><span class="p">.</span><span class="nf">Handler</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€Run åªåšäº†ä¸¤ä»¶äº‹æƒ…ï¼Œè§£æåœ°å€å’Œå¼€å¯æœåŠ¡ã€‚è¿™é‡Œçš„åœ°å€å…¶å®åªéœ€è¦ä¼ ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½†æ˜¯ä¸ºäº†å®ç°å¯ä¼ å¯ä¸ä¼ ï¼Œæ‰€ä»¥ç”¨çš„å‚æ•°æ˜¯ä¸€ä¸ªå˜å‚ã€‚åœ¨ resolveAddress ä¸­å¤„ç†äº† addr çš„ä¸åŒæƒ…å†µä¸‹çš„ç»“æœã€‚<br>
ã€€ã€€å¼€å¯æœåŠ¡ä½¿ç”¨çš„æ˜¯æ ‡å‡†åº“ net/http package ä¸­çš„ ListenAndServe æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ¥å—ä¸€ä¸ªç›‘å¬åœ°å€å’Œä¸€ä¸ª Handler æ¥å£çš„å˜é‡ã€‚Handler æ¥å£çš„å®šä¹‰å¾ˆç®€å•ï¼Œåªæœ‰ä¸€ä¸ª ServeHTTP æ–¹æ³•ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Go" data-lang="Go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">ListenAndServe</span><span class="p">(</span><span class="nx">addr</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">handler</span> <span class="nx">Handler</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">server</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">Server</span><span class="p">{</span><span class="nx">Addr</span><span class="p">:</span> <span class="nx">addr</span><span class="p">,</span> <span class="nx">Handler</span><span class="p">:</span> <span class="nx">handler</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">server</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Handler</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">ServeHTTP</span><span class="p">(</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="o">*</span><span class="nx">Request</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€å› ä¸º Engine å°±å®ç°äº† ServeHTTPï¼Œè¿™é‡Œä¼šå°† Engine æœ¬èº«ä¼ ç»™ ListenAndServe æ–¹æ³•ï¼Œå½“ç›‘å¬çš„ç«¯å£æœ‰æ–°çš„è¿æ¥æ—¶ï¼ŒListenAndServe ä¼šè´Ÿè´£ accept å»ºç«‹è¿æ¥ï¼Œå¹¶ä¸”åœ¨è¿æ¥ä¸Šæœ‰æ•°æ®æ—¶ï¼Œä¼šè°ƒç”¨ handler çš„ ServeHTTP æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚</p>
<h2 id="å¤„ç†æ¶ˆæ¯">å¤„ç†æ¶ˆæ¯</h2>
<p>ã€€ã€€Engine çš„ ServeHTTP æ˜¯å¤„ç†å¤„ç†æ¶ˆæ¯çš„å›è°ƒå‡½æ•°ï¼Œä¸‹é¢å°±æ¥çœ‹ä¸€ä¸‹å®ƒçš„å†…å®¹ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Go" data-lang="Go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">engine</span> <span class="o">*</span><span class="nx">Engine</span><span class="p">)</span> <span class="nf">ServeHTTP</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">req</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">c</span> <span class="o">:=</span> <span class="nx">engine</span><span class="p">.</span><span class="nx">pool</span><span class="p">.</span><span class="nf">Get</span><span class="p">().(</span><span class="o">*</span><span class="nx">Context</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="nx">c</span><span class="p">.</span><span class="nx">writermem</span><span class="p">.</span><span class="nf">reset</span><span class="p">(</span><span class="nx">w</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">c</span><span class="p">.</span><span class="nx">Request</span> <span class="p">=</span> <span class="nx">req</span>
</span></span><span class="line"><span class="cl">    <span class="nx">c</span><span class="p">.</span><span class="nf">reset</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">engine</span><span class="p">.</span><span class="nf">handleHTTPRequest</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">engine</span><span class="p">.</span><span class="nx">pool</span><span class="p">.</span><span class="nf">Put</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€å›è°ƒå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ç”¨äºæ¥æ”¶è¯·æ±‚å›å¤çš„ wï¼Œå°†å›å¤çš„æ•°æ®å†™å…¥åˆ° w å³å¯ï¼Œå¦ä¸€ä¸ªæ˜¯æŒæœ‰æœ¬æ¬¡è¯·æ±‚çš„æ•°æ®çš„ reqï¼Œå¯ä»¥ä» req é‡Œè¯»åç»­å¤„ç†æ‰€éœ€çš„æ‰€æœ‰æ•°æ®ã€‚<br>
ã€€ã€€ServeHTTP åšäº†å››ä»¶äº‹æƒ…ï¼Œé¦–å…ˆä» pool æ± é‡Œæ‹¿å–ä¸€ä¸ª Contextï¼Œç„¶åå°† Context ä¸å›è°ƒå‡½æ•°çš„å‚æ•°ç»‘å®šï¼Œæ¥ç€ä½¿ç”¨ Context ä½œä¸ºå‚æ•°è°ƒç”¨ handleHTTPRequest æ–¹æ³•å¤„ç†è¿™ä¸ªç½‘ç»œè¯·æ±‚ï¼Œæœ€åå°† Context æ”¾å›åˆ°æ± ä¸­ã€‚<br>
ã€€ã€€è¿™é‡Œæˆ‘ä»¬å…ˆåªçœ‹ handleHTTPRequest æ–¹æ³•çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Go" data-lang="Go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">engine</span> <span class="o">*</span><span class="nx">Engine</span><span class="p">)</span> <span class="nf">handleHTTPRequest</span><span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ... çœç•¥ä¸€äº›ä»£ç 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">t</span> <span class="o">:=</span> <span class="nx">engine</span><span class="p">.</span><span class="nx">trees</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">tl</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">t</span><span class="p">);</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nx">tl</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="nx">t</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">method</span> <span class="o">!=</span> <span class="nx">httpMethod</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">continue</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="nx">root</span> <span class="o">:=</span> <span class="nx">t</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">root</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Find route in tree
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">value</span> <span class="o">:=</span> <span class="nx">root</span><span class="p">.</span><span class="nf">getValue</span><span class="p">(</span><span class="nx">rPath</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">params</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">skippedNodes</span><span class="p">,</span> <span class="nx">unescape</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ... çœç•¥ä¸€äº›ä»£ç 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="nx">value</span><span class="p">.</span><span class="nx">handlers</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">c</span><span class="p">.</span><span class="nx">handlers</span> <span class="p">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">handlers</span>
</span></span><span class="line"><span class="cl">            <span class="nx">c</span><span class="p">.</span><span class="nx">fullPath</span> <span class="p">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">fullPath</span>
</span></span><span class="line"><span class="cl">            <span class="nx">c</span><span class="p">.</span><span class="nf">Next</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="nx">c</span><span class="p">.</span><span class="nx">writermem</span><span class="p">.</span><span class="nf">WriteHeaderNow</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ... çœç•¥ä¸€äº›ä»£ç 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ... çœç•¥ä¸€äº›ä»£ç 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€åœ¨ handleHTTPRequest æ–¹æ³•ä¸­æœ€ä¸»è¦åšçš„æ˜¯ä¸¤ä»¶äº‹ï¼Œé¦–å…ˆæ ¹æ®è¯·æ±‚çš„åœ°å€ä»åŸºæ•°æ ‘ä¸­æ‹¿å–ä¹‹å‰æ³¨å†Œè¿‡çš„æ–¹æ³•ï¼Œè¿™é‡Œä¼šå°† handlers èµ‹å€¼ç»™æœ¬æ¬¡å¤„ç†çš„ Contextï¼Œç„¶åè°ƒç”¨ Context çš„ Next å‡½æ•°æ¥æ‰§è¡Œ handlers ä¸­çš„æ–¹æ³•ï¼Œæœ€ååœ¨ Context çš„ responseWriter ç±»å‹å¯¹è±¡ä¸­å†™å…¥æœ¬æ¬¡è¯·æ±‚çš„è¿”å›æ•°æ®ã€‚</p>
<h2 id="context">Context</h2>
<p>ã€€ã€€åœ¨å¤„ç† HTTP è¯·æ±‚çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„ä¸Šä¸‹æ–‡ç›¸å…³æ•°æ®éƒ½åœ¨ Context å˜é‡ä¸­ï¼Œä½œè€…ä¹Ÿåœ¨ Context struct çš„æ³¨é‡Šé‡Œå†™äº† &ldquo;Context is the most important part of gin&rdquo;ï¼Œè¶³è§å®ƒçš„é‡è¦æ€§ã€‚<br>
ã€€ã€€åœ¨ä¸Šé¢è®²åˆ° Engine çš„ ServeHTTP æ–¹æ³•æ—¶ï¼Œå¯ä»¥çœ‹åˆ° Context å¹¶ä¸æ˜¯ç›´æ¥åˆ›å»ºçš„ï¼Œè€Œæ˜¯é€šè¿‡ Engine çš„ pool å˜é‡çš„ Get æ–¹æ³•å–å¾—çš„ï¼Œå–å‡ºæ¥ä»¥åå…ˆå°†å…¶çŠ¶æ€é‡ç½®ç„¶åå†ä½¿ç”¨ï¼Œåœ¨ä½¿ç”¨å®Œæ¯•ä»¥ååˆè¢«æ”¾å›äº† pool ä¸­ã€‚<br>
ã€€ã€€Engine çš„ pool å˜é‡æ˜¯ä¸€ä¸ª sync.Pool ç±»å‹çš„ï¼Œæ­¤å¤„åªè¦çŸ¥é“å®ƒæ˜¯ Go å®˜æ–¹æä¾›çš„ä¸€ä¸ªæ”¯æŒå¹¶å‘ä½¿ç”¨çš„å¯¹è±¡æ± å³å¯ï¼Œå¯ä»¥é€šè¿‡å®ƒçš„ Get æ–¹æ³•ä»æ± ä¸­å–å‡ºä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Put æ–¹æ³•å‘æ± ä¸­æŠ•å…¥ä¸€ä¸ªå¯¹è±¡ã€‚åœ¨æ± æ˜¯ç©ºçš„æ—¶å€™å¦‚æœä½¿ç”¨ Get æ–¹æ³•ï¼Œåˆ™å®ƒä¼šé€šè¿‡è‡ªå·±çš„ New æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡å¹¶å°†å…¶è¿”å›ã€‚<br>
ã€€ã€€è¿™ä¸ª New æ–¹æ³•æ­£æ˜¯åœ¨ Engine çš„ New æ–¹æ³•ä¸­å®šä¹‰çš„ï¼Œå†æ¥çœ‹ä¸€çœ¼ Engine çš„ New æ–¹æ³•ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Go" data-lang="Go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">New</span><span class="p">()</span> <span class="o">*</span><span class="nx">Engine</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ... çœç•¥å…¶å®ƒä»£ç 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">engine</span><span class="p">.</span><span class="nx">pool</span><span class="p">.</span><span class="nx">New</span> <span class="p">=</span> <span class="kd">func</span><span class="p">()</span> <span class="nx">any</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">engine</span><span class="p">.</span><span class="nf">allocateContext</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">engine</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€ä»ä»£ç ä¸­å¯ä»¥çœ‹åˆ° Context çš„åˆ›å»ºæ–¹æ³•æ˜¯ Engine çš„ allocateContext æ–¹æ³•ã€‚åœ¨ allocateContext æ–¹æ³•ä¸­å¹¶æ²¡æœ‰ä»€ä¹ˆç„æœºï¼Œåªæ˜¯åšäº†ä¸¤æ­¥åˆ‡ç‰‡é•¿åº¦çš„é¢„åˆ†é…ï¼Œç„¶ååˆ›å»ºå¯¹è±¡å¹¶è¿”å›ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Go" data-lang="Go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">engine</span> <span class="o">*</span><span class="nx">Engine</span><span class="p">)</span> <span class="nf">allocateContext</span><span class="p">()</span> <span class="o">*</span><span class="nx">Context</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">v</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="nx">Params</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">engine</span><span class="p">.</span><span class="nx">maxParams</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">skippedNodes</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="nx">skippedNode</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">engine</span><span class="p">.</span><span class="nx">maxSections</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="o">&amp;</span><span class="nx">Context</span><span class="p">{</span><span class="nx">engine</span><span class="p">:</span> <span class="nx">engine</span><span class="p">,</span> <span class="nx">params</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">v</span><span class="p">,</span> <span class="nx">skippedNodes</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">skippedNodes</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€ä¸Šæ–‡æåˆ°çš„ Context çš„ Next æ–¹æ³•ä¼šæ‰§è¡Œ handlers ä¸­çš„æ‰€æœ‰æ–¹æ³•ï¼Œæ¥çœ‹ä¸€ä¸‹å®ƒçš„å®ç°ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Go" data-lang="Go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">Context</span><span class="p">)</span> <span class="nf">Next</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">c</span><span class="p">.</span><span class="nx">index</span><span class="o">++</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="nx">c</span><span class="p">.</span><span class="nx">index</span> <span class="p">&lt;</span> <span class="nb">int8</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">handlers</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">c</span><span class="p">.</span><span class="nx">handlers</span><span class="p">[</span><span class="nx">c</span><span class="p">.</span><span class="nx">index</span><span class="p">](</span><span class="nx">c</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nx">c</span><span class="p">.</span><span class="nx">index</span><span class="o">++</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€è™½ç„¶ handlers æ˜¯ä¸€ä¸ªåˆ‡ç‰‡ï¼Œä½†æ˜¯ Next æ–¹æ³•å¹¶æœªç®€å•å®ç°æˆä¸€ä¸ªå¯¹ handlers çš„éå†ï¼Œè€Œæ˜¯å¼•å…¥äº†ä¸€ä¸ªå¤„ç†è¿›åº¦çš„è®°å½• indexï¼Œå®ƒè¢«åˆå§‹åŒ–ä¸º 0ï¼Œåœ¨æ–¹æ³•ä¸€å¼€å§‹çš„æ—¶å€™æ‰§è¡Œç´¯åŠ ï¼Œåœ¨ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œç»“æŸä»¥åå†æ¬¡æ‰§è¡Œç´¯åŠ ã€‚<br>
ã€€ã€€Next è¢«è®¾è®¡æˆè¿™æ ·è·Ÿå®ƒçš„ç”¨æ³•æœ‰å¾ˆå¤§å…³ç³»ï¼Œä¸»è¦æ˜¯ä¸ºäº†è·Ÿä¸€äº›ä¸­é—´ä»¶å‡½æ•°é…åˆã€‚æ¯”å¦‚å½“æŸä¸ª handler æ‰§è¡Œçš„æ—¶å€™è§¦å‘äº† panicï¼Œåœ¨ä¸­é—´ä»¶ä¸­å¯ä»¥ä½¿ç”¨ recover æ¥ä½é”™è¯¯ï¼Œç„¶åå†æ¬¡è°ƒç”¨ Nextï¼Œå³å¯ç»§ç»­æ‰§è¡Œåé¢çš„ handlerï¼Œä¸ä¼šå› ä¸ºä¸€ä¸ª handler çš„é—®é¢˜å½±å“åˆ°æ•´ä¸ª handlers æ•°ç»„ã€‚</p>
<h2 id="å¤„ç†-panic">å¤„ç† panic</h2>
<p>ã€€ã€€åœ¨ Gin ä¸­ï¼Œå¦‚æœæŸä¸ªè¯·æ±‚çš„å¤„ç†å‡½æ•°è§¦å‘äº† panicï¼Œæ•´ä¸ªæ¡†æ¶å¹¶ä¸ä¼šç›´æ¥ crashï¼Œè€Œæ˜¯æŠ›å‡ºä¸€æ¡é”™è¯¯ä¿¡æ¯ï¼Œç„¶åç»§ç»­æä¾›æœåŠ¡ã€‚æœ‰ç‚¹åƒ Lua æ¡†æ¶ä¸€èˆ¬ä¼šä½¿ç”¨ xpcall æ¥æ‰§è¡Œæ¶ˆæ¯çš„å¤„ç†å‡½æ•°ä¸€æ ·ã€‚è¿™ä¸ªæ“ä½œå°±æ˜¯å®˜æ–¹æ–‡æ¡£æåˆ°çš„åŠŸèƒ½ç‚¹ <code>Crash-free</code> äº†ã€‚<br>
ã€€ã€€ä¸Šæ–‡æåˆ°ï¼Œå½“ä½¿ç”¨ gin.Default åˆ›å»ºä¸€ä¸ª Engine çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œ Engine çš„ Use æ–¹æ³•å¯¼å…¥ä¸¤ä¸ªå‡½æ•°ï¼Œå…¶ä¸­çš„ä¸€ä¸ªæ˜¯ Recovery å‡½æ•°çš„è¿”å›å€¼ï¼Œå®ƒåˆæ˜¯å¯¹å…¶å®ƒå‡½æ•°çš„å°è£…ï¼Œæœ€åè°ƒç”¨åˆ°çš„å‡½æ•°æ˜¯ CustomRecoveryWithWriterï¼Œæ¥çœ‹ä¸€ä¸‹è¿™ä¸ªå‡½æ•°çš„å®ç°ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Go" data-lang="Go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">CustomRecoveryWithWriter</span><span class="p">(</span><span class="nx">out</span> <span class="nx">io</span><span class="p">.</span><span class="nx">Writer</span><span class="p">,</span> <span class="nx">handle</span> <span class="nx">RecoveryFunc</span><span class="p">)</span> <span class="nx">HandlerFunc</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ... çœç•¥å…¶å®ƒä»£ç 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="kd">func</span><span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">defer</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nb">recover</span><span class="p">();</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// ... é”™è¯¯å¤„ç†ä»£ç 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}()</span>
</span></span><span class="line"><span class="cl">        <span class="nx">c</span><span class="p">.</span><span class="nf">Next</span><span class="p">()</span> <span class="c1">// æ‰§è¡Œä¸‹ä¸€ä¸ª handler
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€è¿™é‡Œä¸å…³æ³¨é”™è¯¯å¤„ç†çš„ç»†èŠ‚ï¼Œåªçœ‹å®ƒåšçš„äº‹æƒ…ã€‚è¿™ä¸ªå‡½æ•°è¿”å›äº†ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œåœ¨åŒ¿åå‡½æ•°ä¸­ä½¿ç”¨ defer æ³¨å†Œäº†å¦ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œåœ¨è¿™ä¸ªåŒ¿åå‡½æ•°ä¸­ä½¿ç”¨äº† recover æ¥ä½äº† panicï¼Œç„¶åè¿›è¡Œé”™è¯¯å¤„ç†ã€‚åœ¨å¤„ç†ç»“æŸä»¥åï¼Œè°ƒç”¨äº† Context çš„ Next æ–¹æ³•ï¼Œä½¿åŸå…ˆæ­£åœ¨ä¾æ¬¡æ‰§è¡Œçš„ Context çš„ handlers å¯ä»¥ç»§ç»­æ‰§è¡Œä¸‹å»ã€‚</p>
</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/web%E5%BC%80%E5%8F%91/">webå¼€å‘</a>
        
            <a href="/tags/golang/">golang</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-contents--wrapper">
    <h2 class="section-title">ç›¸å…³æ–‡ç« </h2>
    <div class="related-contents">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/p/%E5%88%86%E6%9E%90-go-%E6%A0%87%E5%87%86%E5%BA%93%E4%B8%AD%E7%9A%84-context-%E5%AE%9E%E7%8E%B0/">
        
        

        <div class="article-details">
            <h2 class="article-title">åˆ†æ Go æ ‡å‡†åº“ä¸­çš„ Context å®ç°</h2>
        </div>
    </a>
</article>
            
                
<article class="">
    <a href="/p/%E5%88%86%E6%9E%90-go-%E6%A0%87%E5%87%86%E5%BA%93%E4%B8%AD%E7%9A%84-waitgroup-%E5%AE%9E%E7%8E%B0/">
        
        

        <div class="article-details">
            <h2 class="article-title">åˆ†æ Go æ ‡å‡†åº“ä¸­çš„ WaitGroup å®ç°</h2>
        </div>
    </a>
</article>
            
                
<article class="">
    <a href="/p/skynet-%E4%B8%8E-golang-%E5%B9%B6%E5%8F%91%E6%9C%BA%E5%88%B6%E6%AF%94%E8%BE%83/">
        
        

        <div class="article-details">
            <h2 class="article-title">skynet ä¸ golang å¹¶å‘æœºåˆ¶æ¯”è¾ƒ</h2>
        </div>
    </a>
</article>
            
        </div>
    </div>
</aside>

     
    
        
    <script src="https://utteranc.es/client.js" 
        repo="medetasi/homurua.github.io"
        issue-term="pathname"
        
        label="blog-comment"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2022 - 
        
        2023 æ”¾å­¦åèŒ¶ä¼š
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.11.0">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css"integrity="sha256-c0uckgykQ9v5k&#43;IqViZOZKc47Jn7KQil4/MP3ySA3F8="crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css"integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE="crossorigin="anonymous"
            >

            </main>
    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#ä»‹ç»">ä»‹ç»</a></li>
    <li><a href="#ä»ä¸€ä¸ªå°ä¾‹å­å…¥æ‰‹">ä»ä¸€ä¸ªå°ä¾‹å­å…¥æ‰‹</a></li>
    <li><a href="#http-method">HTTP Method</a></li>
    <li><a href="#åˆ›å»º-engine-å˜é‡">åˆ›å»º Engine å˜é‡</a></li>
    <li><a href="#æ³¨å†Œè·¯ç”±å›è°ƒå‡½æ•°">æ³¨å†Œè·¯ç”±å›è°ƒå‡½æ•°</a></li>
    <li><a href="#ä½¿ç”¨åŸºæ•°æ ‘åŠ é€Ÿè·¯ç”±æ£€ç´¢">ä½¿ç”¨åŸºæ•°æ ‘åŠ é€Ÿè·¯ç”±æ£€ç´¢</a></li>
    <li><a href="#å¯¼å…¥ä¸­é—´ä»¶å¤„ç†å‡½æ•°">å¯¼å…¥ä¸­é—´ä»¶å¤„ç†å‡½æ•°</a></li>
    <li><a href="#å¼€å§‹è¿è¡Œ">å¼€å§‹è¿è¡Œ</a></li>
    <li><a href="#å¤„ç†æ¶ˆæ¯">å¤„ç†æ¶ˆæ¯</a></li>
    <li><a href="#context">Context</a></li>
    <li><a href="#å¤„ç†-panic">å¤„ç† panic</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
